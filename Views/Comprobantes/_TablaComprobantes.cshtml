@model IEnumerable<Enfermeria_app.Models.EnfCita>

@if (!Model.Any())
{
    <div class="alert alert-info text-center mt-3">
        No hay citas registradas en el rango seleccionado.
    </div>
}
else
{
    <!-- 🖥️ Vista para pantallas medianas o grandes -->
    <div class="d-none d-md-block">
        <table class="table table-striped table-hover align-middle">
            <thead class="table-dark">
                <tr>
                    <th>Fecha</th>
                    <th>Hora</th>
                    <th>Nombre</th>
                    <th>Cédula</th>
                    <th>Estado</th>
                    <th>Llegada</th>
                    <th>Salida</th>
                    <th class="text-end">Acciones</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var c in Model)
                {
                    <tr>
                        <td>@c.IdHorarioNavigation?.Fecha.ToDateTime(TimeOnly.MinValue).ToString("dd/MM/yyyy")</td>
                        <td>@c.IdHorarioNavigation?.Hora.ToString("HH\\:mm")</td>
                        <td>@c.IdPersonaNavigation?.Nombre</td>
                        <td>@c.IdPersonaNavigation?.Cedula</td>
                        <td>
                            <span class="badge
                                        @(c.Estado == "Creada" ? "bg-primary" :
                                                                    c.Estado == "Llegada" ? "bg-warning text-dark" :
                                                                    c.Estado == "Completada" ? "bg-success" :
                                                                    "bg-danger")">
                        @c.Estado
                    </span>
                </td>
                <td>@(c.HoraLlegada.HasValue? c.HoraLlegada.Value.ToString("HH\\:mm") : "-")</td>
                <td>@(c.HoraSalida.HasValue? c.HoraSalida.Value.ToString("HH\\:mm") : "-")</td>
                <td class="text-end">
                    <a asp-action="Descargar" asp-route-id="@c.Id" class="btn btn-outline-primary btn-sm">
                        <i class="bi bi-file-earmark-arrow-down"></i> PDF
                    </a>
                </td>
            </tr>
                        }
            </tbody>
        </table>
    </div>

    <!-- 📱 Vista tipo "card" para pantallas pequeñas -->
    <div class="d-md-none">
        <div class="d-flex flex-column gap-3">
            @foreach (var c in Model)
            {
                <div class="card shadow-sm">
                    <div class="card-body p-3">
                        <h6 class="fw-bold mb-2 text-primary">
                            @c.IdPersonaNavigation?.Nombre
                        </h6>
                        <p class="mb-1"><strong>Fecha:</strong> @c.IdHorarioNavigation?.Fecha.ToDateTime(TimeOnly.MinValue).ToString("dd/MM/yyyy")</p>
                        <p class="mb-1"><strong>Hora:</strong> @c.IdHorarioNavigation?.Hora.ToString("HH\\:mm")</p>
                        <p class="mb-1"><strong>Cédula:</strong> @c.IdPersonaNavigation?.Cedula</p>
                        <p class="mb-1">
                            <strong>Estado:</strong>
                            <span class="badge
                                        @(c.Estado == "Creada" ? "bg-primary" :
                                                                    c.Estado == "Llegada" ? "bg-warning text-dark" :
                                                                    c.Estado == "Completada" ? "bg-success" :
                                                                    "bg-danger")">
                        @c.Estado
                    </span>
                </p>
                <p class="mb-1"><strong>Llegada:</strong> @(c.HoraLlegada.HasValue? c.HoraLlegada.Value.ToString("HH\\:mm") : "-")</p>
                <p class="mb-2"><strong>Salida:</strong> @(c.HoraSalida.HasValue? c.HoraSalida.Value.ToString("HH\\:mm") : "-")</p>

                        <div class="text-end">
                            <a asp-action="Descargar" asp-route-id="@c.Id" class="btn btn-outline-primary btn-sm">
                                <i class="bi bi-file-earmark-arrow-down"></i> Descargar PDF
                            </a>
                        </div>
                    </div>
                </div>
                }
        </div>
    </div>
}
